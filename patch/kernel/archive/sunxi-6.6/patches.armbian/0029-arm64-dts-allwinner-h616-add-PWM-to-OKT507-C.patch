From 06937eef08790ad40a5607a246386f8021168255 Mon Sep 17 00:00:00 2001
From: Jernej Skrabec <jernej.skrabec@gmail.com>
Date: Thu, 29 Feb 2024 18:09:54 +0100
Subject: [PATCH 29/33] arm64: dts: allwinner: h616: add PWM to OKT507-C

Signed-off-by: Jernej Skrabec <jernej.skrabec@gmail.com>
---
 arch/arm64/boot/dts/allwinner/sun50i-t507-okt507c.dts | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/allwinner/sun50i-t507-okt507c.dts b/arch/arm64/boot/dts/allwinner/sun50i-t507-okt507c.dts
index ae4aa0eb73dc..f36492081b06 100644
--- a/arch/arm64/boot/dts/allwinner/sun50i-t507-okt507c.dts
+++ b/arch/arm64/boot/dts/allwinner/sun50i-t507-okt507c.dts
@@ -11,6 +11,7 @@
 #include <dt-bindings/gpio/gpio.h>
 #include <dt-bindings/interrupt-controller/arm-gic.h>
 #include <dt-bindings/leds/common.h>
+#include <dt-bindings/pwm/pwm.h>
 
 / {
 	model = "OKT507-C";
@@ -28,7 +29,7 @@ chosen {
 
 	backlight: backlight {
 		compatible = "pwm-backlight";
-		//pwms = <&pwm 0 20000 PWM_POLARITY_INVERTED>;
+		pwms = <&pwm 0 20000 PWM_POLARITY_INVERTED>;
 		enable-gpios = <&pio 4 22 GPIO_ACTIVE_HIGH>; /* PE22 */
 		power-supply = <&reg_sw>;
 		brightness-levels = <0 1 2 4 8 16 32 64 128 255>;
@@ -212,6 +213,12 @@ &ohci3 {
 	status = "okay";
 };
 
+&pwm {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pwm0_pin>;
+	status = "okay";
+};
+
 &r_i2c {
 	status = "okay";
 
-- 
2.44.0

